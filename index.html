<!doctype html>
<html lang="uk">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>FloPro UA</title><link rel="manifest" href="manifest.json"><meta name="theme-color" content="#FF69B4">
<style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Segoe UI',sans-serif;background:linear-gradient(180deg,#667eea 0%,#764ba2 100%);min-height:100vh;color:#333;overflow-x:hidden}[data-theme="dark"]{--bg:#1a1a1a;--card:#2a2a2a;--text:#eee}body[data-theme="dark"]{background:var(--bg)!important;color:var(--text)!important}.container[data-theme="dark"],#past-periods[data-theme="dark"],.settings[data-theme="dark"]{background:var(--card)!important;color:var(--text)}[data-theme="dark"] .day,[data-theme="dark"] input{opacity:0.9}.header{position:relative;height:200px;background:linear-gradient(135deg,#FF69B4,#FFB6C1,#FF69B4);background-size:400% 400%;animation:gradientShift 15s ease infinite;text-align:center;padding-top:60px}.header h1{font-size:2.5rem;color:white;text-shadow:0 4px 8px rgba(0,0,0,0.3)}.header::after{content:'';position:absolute;bottom:0;left:0;right:0;height:100px;background:linear-gradient(transparent,#667eea)}.container{max-width:400px;margin:0 auto;padding:20px;background:white;border-radius:30px 30px 0 0;margin-top:-50px;box-shadow:0 -20px 40px rgba(0,0,0,0.1)}.calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:5px;margin:20px 0;text-align:center}.day{width:45px;height:45px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:500;cursor:pointer;transition:all 0.3s;border:2px solid transparent}.day:hover{background:#FFEBEE}.day.period{background:#FF69B4!important;color:white!important}.day.prediction{background:#FFB6C1;color:#333}.day.fertile{background:#a8edea}.day.today{border-color:#FF69B4}.input-group{margin:20px 0}.input-group label{display:block;margin-bottom:8px;font-weight:600;color:#555}.input-group input{width:100%;padding:15px;border:2px solid #eee;border-radius:15px;font-size:16px;transition:border-color 0.3s}.input-group input:focus{outline:none;border-color:#FF69B4}.symptoms{display:flex;flex-wrap:wrap;gap:10px;margin:15px 0}.symptom-btn{padding:10px 15px;background:#f8f9fa;border:2px solid #eee;border-radius:25px;cursor:pointer;transition:all 0.3s;font-size:14px}.symptom-btn.selected{background:#FF69B4;color:white;border-color:#FF69B4}.btn-primary{width:100%;padding:18px;background:linear-gradient(135deg,#FF69B4,#FFB6C1);color:white;border:none;border-radius:20px;font-size:18px;font-weight:600;cursor:pointer;transition:all 0.3s;margin:20px 0}.btn-primary:hover{transform:translateY(-2px);box-shadow:0 10px 20px rgba(255,105,180,0.3)}.prediction{padding:20px;background:linear-gradient(135deg,#a8edea,#fed6e3);border-radius:20px;margin:20px 0;text-align:center;font-size:1.2rem;font-weight:bold;color:#d63384}.history{opacity:0.8}.settings{padding:20px;background:#f8f9ff;border-radius:15px;margin:10px;display:flex;flex-direction:column;gap:15px}.settings label{display:flex;justify-content:space-between;align-items:center}.settings input{width:60px;padding:5px;border:1px solid #ddd;border-radius:5px}.settings button{width:auto;padding:10px 20px}@keyframes gradientShift{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}</style>
</head>
<body>
<div class="header"><h1>üå∏ FloPro UA Pro</h1></div>
<div class="container">
<div class="prediction" id="prediction">–î–æ–¥–∞–π —Ü–∏–∫–ª –¥–ª—è —Ç–æ—á–Ω–∏—Ö –ø—Ä–æ–≥–Ω–æ–∑—ñ–≤</div>
<div class="calendar" id="calendar"></div>
<div class="input-group"><label>–î–∞—Ç–∞ –ø–æ—á–∞—Ç–∫—É</label><input type="date" id="startDate"></div>
<div class="symptoms" id="symptoms"></div>
<button class="btn-primary" onclick="addPeriod()">–î–æ–¥–∞—Ç–∏ —Ü–∏–∫–ª & —Å–∏–º–ø—Ç–æ–º–∏ üíï</button>
<div class="settings" id="settings"></div>
<div class="history" id="history"></div>
</div>
<script>const months=['–°—ñ—á','–õ—é—Ç','–ë–µ—Ä','–ö–≤—ñ','–¢—Ä–∞','–ß–µ—Ä','–õ–∏–ø','–°–µ—Ä','–í–µ—Ä','–ñ–æ–≤','–õ–∏—Å','–ì—Ä—É'];const symptoms=['üò¥ –°–æ–Ω–ª–∏–≤—ñ—Å—Ç—å','ü§ï –ë—ñ–ª—å','üò¢ –ù–∞—Å—Ç—Ä—ñ–π','ü§∞ –ù–∞–±—Ä—è–∫','üî• –ü—Ä–∏–ø–ª–∏–≤–∏','‚ùÑÔ∏è –•–æ–ª–æ–¥','ü§Æ –ù—É–¥–æ—Ç–∞','üç´ –°–æ–ª–æ–¥–∫–µ','üí§ –ë–µ–∑—Å–æ–Ω–Ω—è'];let data=JSON.parse(localStorage.floPro||'[]');let settings=JSON.parse(localStorage.floSettings||'{"cycle":28,"fertile":14}');let today=new Date();today.setHours(0,0,0,0);function init(){document.getElementById('cycleLen')?0:(document.getElementById('settings').innerHTML=`<label>Cycle: <input id="cycleLen" type="number" value="${settings.cycle}" min="21" max="35" onchange="saveSettings()"> –¥–Ω—ñ–≤</label><label>Fertile: <input id="fertileShift" type="number" value="${settings.fertile}" min="10" max="20" onchange="saveSettings()"> –¥–µ–Ω—å</label><button class="btn-primary" onclick="exportData()">üìä –ó–≤—ñ—Ç</button><button id="themeBtn" onclick="toggleTheme()">üåô –¢–µ–º–Ω–∞</button>`);document.getElementById('cycleLen').value=settings.cycle;document.getElementById('fertileShift').value=settings.fertile;if(localStorage.theme==='dark')toggleTheme();if(Notification.permission==='default')Notification.requestPermission();renderAll();}let currentSyms=[];function renderCalendar(){let cal=document.getElementById('calendar'),now=new Date();now.setDate(1);let start=now.getDay()||7;cal.innerHTML='';for(let i=0;i<42;i++){let day=document.createElement('div');day.className='day';let date=new Date(now);date.setDate(now.getDate()+i-start+1);if(date<today){day.style.opacity=0.5;}if(data.some(p=>date>=p.start&&date<=p.end)){day.classList.add('period');}if(data.some(p=>Math.abs(date-p.next)<86400000)){day.classList.add('prediction');}if(Math.abs(date-today)<86400000){day.classList.add('today');}if(data.some(p=>Math.abs(date-(new Date(p.start.getTime()+settings.fertile*86400000)))<172800000)){day.classList.add('fertile');}day.textContent=date.getDate();day.onclick=()=>document.getElementById('startDate').value=date.toISOString().split('T')[0];cal.appendChild(day);}}function renderSymptoms(){document.getElementById('symptoms').innerHTML=symptoms.map((s,i)=`<button class="symptom-btn ${currentSyms.includes(s)?'selected':''}" onclick="toggleSymptom(${i})">${s}</button>`).join('');}function toggleSymptom(i){let sym=symptoms[i];let idx=currentSyms.indexOf(sym);idx>-1?currentSyms.splice(idx,1):currentSyms.push(sym);renderSymptoms();}function addPeriod(){let start=new Date(document.getElementById('startDate').value);if(!start||isNaN(start))return alert('üëÜ –ö–ª—ñ–∫–Ω–∏ –Ω–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä!');let cycle=settings.cycle*86400000;let fertileShift=settings.fertile*86400000;let periodEnd=new Date(start.getTime()+5*86400000);let next=new Date(start.getTime()+cycle);let fertileDate=new Date(start.getTime()+fertileShift);data.push({start,end:periodEnd,next,fertile:fertileDate,symptoms:[...currentSyms],date:Date.now()});localStorage.floPro=JSON.stringify(data);currentSyms=[];renderAll();if(Notification.permission==='granted')new Notification('FloPro','–¶–∏–∫–ª –¥–æ–¥–∞–Ω–æ! –ù–∞—Å—Ç—É–ø–Ω–∞: '+new Date(next).toLocaleDateString('uk-UA'));document.getElementById('startDate').value='';}function saveSettings(){settings.cycle=+document.getElementById('cycleLen').value||28;settings.fertile=+document.getElementById('fertileShift').value||14;localStorage.floSettings=JSON.stringify(settings);renderAll();}function predict(){let pred=document.getElementById('prediction');if(!data.length){pred.innerHTML='üëÜ –î–æ–¥–∞–π –ø–µ—Ä—à–∏–π —Ü–∏–∫–ª –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏—Ö –ø—Ä–æ–≥–Ω–æ–∑—ñ–≤';return;}let last=data[data.length-1];let next=last.next;let days=(new Date(next)-Date.now())/86400000|0;let fertileDays=(new Date(last.fertile)-Date.now())/86400000|0;pred.innerHTML=`üìÖ <strong>–ú–µ–Ω—Å—Ç—Ä—É–∞—Ü—ñ—è:</strong> ${days>0?days+' –¥–Ω—ñ–≤':'—Å—å–æ–≥–æ–¥–Ω—ñ!'}</br>ü•ö <strong>Fertile:</strong> ${fertileDays>0?fertileDays+' –¥–Ω—ñ–≤':'—Å—å–æ–≥–æ–¥–Ω—ñ!'}`+(days<=3?' <span style="color:red">üîî –ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è!</span>':'');}function exportData(){let avgCycle=data.length?data.map(d=>(d.next-d.start)/864e5/1e6).reduce((a,b)=>a+b)/data.length:28;let report=`FloPro UA –ó–≤—ñ—Ç ${new Date().toLocaleDateString('uk-UA')}
–¶–∏–∫–ª—ñ–≤: ${data.length} | –°–µ—Ä–µ–¥–Ω—ñ–π: ${avgCycle.toFixed(1)} –¥–Ω—ñ–≤

–û—Å—Ç–∞–Ω–Ω—ñ 5:
${data.slice(-5).map(p=>`${p.start.toLocaleDateString('uk-UA')} ‚Üí ${p.next.toLocaleDateString('uk-UA')} [${p.symptoms.join(', ')}]`).join('\n')}

–ù–∞—Å—Ç—É–ø–Ω–∞: ${data[data.length-1]?.next.toLocaleDateString('uk-UA')}`;let blob=new Blob([report],{type:'text/plain;charset=utf-8'});let url=URL.createObjectURL(blob);let a=document.createElement('a');a.href=url;a.download='FloPro-–∑–≤—ñ—Ç.txt';document.body.appendChild(a);a.click();document.body.removeChild(a);}function toggleTheme(){let isDark=document.body.dataset.theme==='dark';document.body.dataset.theme=isDark?null:'dark';document.getElementById('themeBtn').textContent=isDark?'‚òÄÔ∏è –°–≤—ñ—Ç–ª–∞':'üåô –¢–µ–º–Ω–∞';localStorage.theme=document.body.dataset.theme||'';}function renderHistory(){let hist=document.getElementById('history');if(!data.length){hist.innerHTML='<div style="text-align:center;padding:20px;color:#999">–Ü—Å—Ç–æ—Ä—ñ—è –∑\'—è–≤–∏—Ç—å—Å—è —Ç—É—Ç üìà</div>';return;}hist.innerHTML=`<h3 style="margin-bottom:10px">üìã –û—Å—Ç–∞–Ω–Ω—ñ —Ü–∏–∫–ª–∏:</h3>${data.slice(-5).map((p,i)=>`<div style="padding:15px;margin:10px 0;background:#f8f9ff;border-radius:15px;border-left:4px solid #FF69B4"><div><strong>${p.start.toLocaleDateString('uk-UA')}</strong> ‚Üí ${p.next.toLocaleDateString('uk-UA')}</div><small>${p.symptoms.join(' ‚Ä¢ ')}</small><button onclick="data.splice(${data.length-1-i},1);localStorage.floPro=JSON.stringify(data);renderAll();" style="float:right;background:#ff4444;color:white;border:none;border-radius:5px;padding:5px 10px;font-size:12px">–í–∏–¥–∞–ª–∏—Ç–∏</button></div>`).join('')}`;}function renderAll(){renderCalendar();renderSymptoms();predict();renderHistory();}renderAll();setInterval(renderAll,3e4);init();</script>
</body>
</html>
